---
title: 'README-file for replication of the report ''The Trade Effects of Estonia`s Integration into the European Community: A Structural Gravity Analysis'' by Bruno Paese, Gellért Turkevi-Nagy, and Ebenezer Sosu'
author: "Bruno Paese"
date: "`r Sys.Date()`"
output:
  md_document:
    variant: gfm
  pdf_document: 
    toc: yes
  html_document:
    number_sections: yes
    toc: yes
    toc_float: yes
  word_document:
    toc: yes
bibliography: bibliography.bib  
csl: chicago-author-date-withnotes.csl
---

```{r setup, include=FALSE}
library(knitr)
```

# Overview

The code in this replication package performs analysis using data from The International Trade and Production Database for Estimation - Release 2 (ITPD-ER02), the World Bank’s World Integrated Trade Solution (WITS) database, the Penn World Table (PWT), and The Dynamic Gravity Dataset. All the analysis were performed using R. A Master file runs all of the code to generate the output for the figures and tables in the paper. The replicator should expect the code to take some time to finish running.

# Data Availability and Provenance Statements

The data relied on in this paper can be found in the './input' folder of the repository and is described in the Table below:

```{r,echo = FALSE}
data_descr <- rbind.data.frame(
              itpde <- c("./output/usitc_itpd_e_r02.rds", "(Borchert et al., 2022)", "yes", "The International Trade and Production Database for Estimation - Release 2."),
              dgd <- c("./output/usitc_dgd.rds", "(Gurevich and Herman, 2018)", "yes", "The Dynamic Gravity dataset, which contains a collection of variables describing aspects of countries and territories as well as the ways in which they relate to one-another."),
              wits <- c("./output/estonia_ahs.rds", "(World Integrated Trade Solution, 2024)", "yes", "Estonia AHS Weighted Average from World in percentage 1995-2019."),
              pwt <- c("./output/estonia_pwt.rds", "(Feenstra et al., 2015)", "yes", "PWT is a database with information on relative levels of income, output, input and productivity."))
colnames(data_descr) <- c("Data File", "Source", "Provided", "Additional information")

kable(data_descr)
```

# Computing environment

This code was run on a `r R.version$platform` platform of a `r Sys.info()["sysname"]` `r Sys.info()["release"]` (`r Sys.info()["version"]`) computer. 

The analysis is conducted in the R programming environment. R is free, open-source and available for download [here](https://www.r-project.org/). The code has been tested against R version `r R.version$version.string`.

Once R is successfully set up on your system, you will need to install a number of external R libraries. You can install the necessary packages manually by running the R script `./code/00_PackageManagement.R`.

# Instructions to replicators

All code files in this repository are referred to through the package here(). This package finds the root as the place where the '.Rproj' file is located. For this repository, the .Rproj file is located in the root folder, referred to as './'. 

The empirical data analysis takes place within the ./input, /code, and ./output directories, respectively holding the external files, the code that operates on the files in the ./input directory, and the computational results. The structure of replication package is indicated in the `./code/01_Master.R' file. Running this Master file will reproduce all the results of this analysis and assign these results to their respective output folders.

Further files and directories refer to: 

- The ./paper directory contains the .tex file to produce the complete and final version of the report.
- The repository is dual-licensed (see ./LICENSE.txt). A Modified BSD License applies to all code, scripts, programs, and SOFTWARE while a Creative Commons Attribution 4.0 International Public License, applies to databases, images, tables, text, and any other objects.
- The Readme files ./Readme.md, ./Readme.html, and ./Readme.docx are generated by ./Readme.Rmd.
- The ./bibliography.bib and ./chicago-author-date-withnotes.csl files contain the bibliography in bibtex and the citation-style file.

# Mapping of Tables and Figures to programs

A mapping of the Figures displayed in the paper to the respective programs can be found below: 

```{r,echo = FALSE}
fig_descr <- rbind.data.frame(
              fig1 = c(NA,"./paper/RIA_Project_EST_EC.tex"," ","Figure 1 in the paper, generated in the .tex file."),
              fig2.a = c(NA,"./code/05_Analysis.R", "./output/figures/EST_total_trade.pdf"," "),
              fig2.b = c(NA,"./code/05_Analysis.R", "./output/figures/EST_overall_openness.pdf"," "),
              fig3 = c(NA,"./code/05_Analysis.R", "./output/figures/EST_AHS.pdf"," "),
              fig4 = c(NA,"./code/05_Analysis.R", "./output/figures/Bilateral_flows.pdf"," "),
              fig5 = c(NA,"./code/05_Analysis.R", "./output/figures/EST_exports_partners.pdf"," "),
              fig6 = c(NA,"./code/05_Analysis.R", "./output/figures/EST_imports_partners.pdf"," "))
fig_descr[1:3,1] = c("1","2.a","2.b")
fig_descr[4:7,1] = c("3","4","5", "6")
colnames(fig_descr) = c("Nr.", "Program", "Output", "Note")
kable(fig_descr)
```

A mapping of the Tables displayed in the paper to the respective programs can be found below: 

```{r,echo = FALSE}
tab_descr = rbind.data.frame(
  tab1 = c(NA,"./code/06_TraditionalGravityEstimates.R", "./output/tables/table_traditional_gravity.tex", " "),
  tab2 = c(NA,"./code/08_FTA.R", "./output/tables/table_glob_gravity.tex", " "),
  tab3 = c(NA,"./paper/RIA_Project_EST_EC.tex", " ", "Table 3 in the paper, generated in the .tex file."),
  tab4 = c(NA,"./code/07_DistancePuzzle.R", "./output/tables/table_distance_gravity.tex", " "))
tab_descr[,1] = 1:nrow(tab_descr)
colnames(tab_descr) = c("Nr.", "Program", "Output", "Note")

kable(tab_descr)
```


  